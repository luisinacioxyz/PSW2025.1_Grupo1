<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar curso</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="font-['Inter'] bg-gray-50 min-h-screen flex flex-col">
    <header class="p-4 gap-3 lg:gap-7 fixed top-0 left-0 right-0 flex items-center border-b border-gray-200 z-50 bg-white">
        <img src="img/logo.png" alt="Logo" class="w-10 h-10">
        <a href="index.html" class="text-base text-gray-600">Cursos</a>
        <a href="list.html" class="text-base text-gray-600">Lista</a>
        <p class="font-bold text-base text-gray-600">Cadastrar</p>
        <a href="coupons.html" class="w-8 h-8"><img src="img/dinheiro.png" alt="Cupons"></a>
        <a href="profile.html" class="w-8 h-8"><img src="img/mulher.png" alt="Perfil"></a>
    </header> 
    
    <div class="mb-4 h-18"></div>
    
    <main class="px-4 flex-1">
        <form onsubmit="handleSubmit(event)" class="mb-8">
            <h1 class="mb-2.5 font-bold text-2xl text-gray-600">Registrar curso</h1>

            <!-- Nome -->
            <div class="mb-2.5 lg:w-1/3 flex flex-col gap-1">
                <label class="text-lg text-gray-600">Nome</label>
                <input type="text" 
                    name="nome" 
                    placeholder="Nome" 
                    required
                    class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md">
            </div>

            <!-- Categoria -->
            <div class="mb-2.5 w-80 flex flex-col gap-1">
                <label class="text-lg text-gray-600">Categoria</label>
                <select name="categoria" class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md" required>
                    <option value="">Selecione a categoria</option>
                    <option value="programacao">Programação</option>
                    <option value="design">Design</option>
                    <option value="dados">Dados</option>
                </select>
            </div>

            <!-- Plataforma -->
            <div class="mb-2.5 w-80 flex flex-col gap-1">
                <label class="text-lg text-gray-600 flex items-center gap-2">
                    Plataforma
                    <button type="button" onclick="openModal()" class="text-white bg-blue-600 hover:bg-blue-700 px-1 rounded-md text-lg shadow-sm transition-all hover:shadow">
                        +   
                    </button>
                </label>

                <select name="plataforma" class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md" required>
                    <option value="">Selecione a plataforma</option>
                    <option value="udemy">Udemy</option>
                    <option value="alura">Alura</option>
                    <option value="coursera">Coursera</option>
                </select>
            </div>

            <!-- Link -->
            <div class="mb-2.5 lg:w-1/3 flex flex-col gap-1">
                <label class="text-lg text-gray-600">Link</label>
                <input type="url" 
                    name="link" 
                    placeholder="Link do curso" 
                    required
                    class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md">
            </div>

            <!-- Imagem -->
            <div class="mb-2.5 lg:w-1/3 flex flex-col gap-1">
                <label class="text-lg text-gray-600">Imagem</label>
                <input type="file" 
                    name="imagem" 
                    accept="image/*"
                    required
                    class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md
                            file:py-2 file:px-4
                            file:rounded-full 
                            file:font-semibold
                            file:bg-purple-50 file:text-blue-600">
            </div>

            <!-- Avaliação -->
            <div class="mb-4 lg:w-1/3 flex flex-col gap-1">
                <label class="text-lg text-gray-600">Avaliação</label>

                <!-- Nota -->
                <div class="flex" id="stars">
                    <button type="button" class="text-2xl text-gray-400 hover:text-yellow-400" onclick="setRating(1)">&#9733;</button>
                    <button type="button" class="text-2xl text-gray-400 hover:text-yellow-400" onclick="setRating(2)">&#9733;</button>
                    <button type="button" class="text-2xl text-gray-400 hover:text-yellow-400" onclick="setRating(3)">&#9733;</button>
                    <button type="button" class="text-2xl text-gray-400 hover:text-yellow-400" onclick="setRating(4)">&#9733;</button>
                    <button type="button" class="text-2xl text-gray-400 hover:text-yellow-400" onclick="setRating(5)">&#9733;</button>
                </div>
                <input type="hidden" id="rating" name="rating" value="0" required>

                <!-- Descrição -->
                <textarea name="review"
                    placeholder="Deixe um comentário..." 
                    required
                    class="p-2 text-sm text-gray-600 border border-gray-300 rounded-md">
                </textarea>
            </div>

            <!-- Botão -->
            <button type="submit" class="px-4 py-2 w-fit bg-blue-600 text-lg text-white rounded-lg hover:bg-blue-700 shadow-sm transition-all hover:shadow"> 
                Registrar
            </button>
        </form>
    </main>

    <footer class="h-20 border-t border-gray-200 bg-white flex items-center justify-center gap-2">
        <img src="img/logo.png" alt="Logo" class="w-15 h-15">
        <p class="text-sm text-gray-600">CourseRank</p>
    </footer>
    
    <!-- Modal registrar plataforma -->
    <div id="modalPlataforma" class="fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-white/30 z-50 hidden">
        <div class="p-6 bg-white rounded-lg shadow-lg w-80 gap-4 flex flex-col items-center">
            <h2 class="text-xl text-gray-600">Registrar plataforma</h2>

            <input type="text" 
                id="novaPlataforma" 
                placeholder="Nome da plataforma"
                class="w-full p-2 text-sm text-gray-600 border border-gray-300 rounded-md"/>

            <button onclick="registrarPlataforma()" class="px-4 py-2 w-fit bg-blue-600 text-lg text-white rounded-lg hover:bg-blue-700 shadow-sm transition-all hover:shadow"> 
                Registrar
            </button>
        </div>
    </div>

    <!-- Modal aviso de plataforma adicionada -->
    <div id="toast" class="fixed inset-0 flex items-center justify-center backdrop-blur-sm bg-white/30 z-50 hidden">
        <div class="p-6 bg-white rounded-lg shadow-lg text-center">
            <p class="text-xl text-green-600">Plataforma adicionada!</p>
        </div>
    </div>

    <script>
        function openModal() {
            document.getElementById("modalPlataforma").classList.remove("hidden");
        }
    
        function registrarPlataforma() {
            const nome = document.getElementById("novaPlataforma").value.trim();
            const select = document.querySelector("select[name='plataforma']");
            const nomeFormatado = nome.toLowerCase().replace(/\s+/g, '-');
            const jaExiste = Array.from(select.options).some(opt => opt.value === nomeFormatado);

            if (nome.length < 3) {
                alert("O nome da plataforma deve ter pelo menos 3 letras.");
            } else if (jaExiste) {
                alert("Essa plataforma já está na lista.");
            } else {
                const option = document.createElement("option");
                option.value = nomeFormatado;
                option.text = nome;
                option.selected = true;

                select.appendChild(option);

                // Fecha o modal
                document.getElementById("modalPlataforma").classList.add("hidden");
                document.getElementById("novaPlataforma").value = "";

                // Mostra o toast
                const toast = document.getElementById("toast");
                toast.classList.remove("hidden");

                // Esconde depois de 2.5 segundos
                setTimeout(() => {
                    toast.classList.add("hidden");
                }, 2500);
            }
        }
    
        // Fecha modal ao clicar fora dele (opcional)
        window.addEventListener("click", function (e) {
            const modal = document.getElementById("modalPlataforma");
            if (e.target === modal) {
                modal.classList.add("hidden");
            }
        });
    </script>
</body>
</html>




